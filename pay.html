<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fetch Data and Redirect</title>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('https://afdian.net/a/zzlx587')
                .then(response => {
                    if (response.ok) {
                        return response.json(); // 假设服务器返回的是JSON数据
                    }
                    throw new Error('Network response was not ok.');
                })
                .then(data => {
                    console.log(data); // 处理获取到的数据
                    redirectToUrl(); // 如果需要的话，可以在这里处理数据后再跳转
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                    setTimeout(retryFetch, 50); // 5秒后重试
                });
        });

        function redirectToUrl() {
            window.location.href = 'https://afdian.net/a/zzlx587';
        }

        function retryFetch() {
            console.log('Retrying fetch...');
            document.querySelector('script').textContent = ''; // 清除之前的脚本以避免重复执行
            document.addEventListener('DOMContentLoaded', function() {
                fetch('https://afdian.net/a/zzlx587')
                    .then(response => {
                        if (response.ok) {
                            return response.json();
                        }
                        throw new Error('Network response was not ok.');
                    })
                    .then(data => {
                        redirectToUrl();
                    })
                    .catch(error => {
                        setTimeout(retryFetch, 50); // 继续重试
                    });
            });
        }
    </script>
</head>
<body>
    <!-- 页面内容 -->
</body>
</html>
